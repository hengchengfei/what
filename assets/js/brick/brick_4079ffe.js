!function(root,undefined){function compile(e){var i=$(e),t=e.attributes,n=[],r={"ic-ctrl":-1e3},o=0;_.each(directives.get(),function(e,i){return"object"==typeof e&&e.priority?void(r[i]=e.priority):void(r[i]=o++)});for(var a,c=0,s=t.length;s>c;c++)a=t[c].name,directives.get(a)&&n.push(a);for(n.sort(function(e,i){return r[e]-r[i]});a=n.shift();)directives.exec(a,i,t)}function recordManager(){function e(e){if(e&&e.constructor===Object)for(var i in e)this[i]=e[i];this._pool={}}var i={key:"id",init:function(e){if("object"!=typeof e)throw"must be Array or Object on init";this._pool;for(var i in e){var t=e[i];this.beforeSave(t,i)}return this._pool=e,this.fire("init"),this},get:function(e,i){var t=this._pool,n=[];if(!arguments.length){for(var r in t)n.push($.extend(!0,{},t[r]));return n}for(var o in t){var a=t[o];e===this._queryKeyValue(a,i)&&n.push($.extend(!0,{},a))}return n},set:function(e,i){var t=this._pool,n=this._find||[],r=[];for(var o in n){var a=n[o];if(!i||this._queryKeyValue(a,i)!==this._queryKeyValue(e,i)){var c=this._queryKeyValue(a),s=this._getIndex(c);a=t[s],r.push($.extend(!0,a,e)),this.beforeSave(a),this.fire("change."+c,{change:a})}}return this.end(),r.length?r:!1},add:function(e){var i=this._pool,t=this._queryKeyValue(e);return this.beforeSave(e),i.push?i.push(e):i[t]=e,this.fire("add",{add:e}),this},remove:function(){var e=this._pool,i=this._find||[];for(var t in i){var n=i[t],r=this._queryKeyValue(n),o=this._getIndex(r);e.splice&&void 0!==o?e.splice(o,1):delete e[r],this.fire("remove."+r,{remove:n})}return this.end(),i},clear:function(){return this._pool={},this.end(),this.fire("clear"),this},find:function(e,i){return this._find=this.get(e,i),this},result:function(){return this._find},end:function(){this._find=void 0},fire:function(e,i){var t=this.scope,n=this.get(),r=this.eventPrefix?this.eventPrefix+".":"";i=$.extend({pool:n},i||{}),t&&t.fire&&t.fire(r+e,i)},beforeSave:function(){},_queryKeyValue:function(e,i){return this._get(e,i).v},_get:function(e,i){var t=(i||this.key).split("."),n=function(e,i){var t=e.shift(),n=i[t];return e.length?arguments.callee(e,n):n}(t,e);return{r:e,v:n}},_getIndex:function(e,i){var t=this._pool,n="object"==typeof e?this._queryKeyValue(e,i):e;for(var r in t)if(this._queryKeyValue(t[r],i)===n)return r},_look:function(){console.log(this._pool)}};for(var t in i)e.prototype[t]=i[t];return e}function parser(e){if(1!=e.nodeType){if(3==e.nodeType){var i=e.nodeValue;e.nodeValue=i.replace(/{{(.+?)}}/g,"<%= $1 %>")}}else{for(var t,n,r,o=$(e),a=e.attributes,c=[],s={skip:-100,init:-10,"for":0,"for-start":1,"for-init":10,"if":100,"else-if":99,"if-start":100,"if-init":110,"else":100,bind:1e3,"if-end":1e4,"for-end":1e4},l=0,f=a.length;f>l;l++)t=a[l],n=t.name,r=t.value,(/^ic-(skip|init|for|if|else|bind)/.test(n)||/\{\{.+?\}\}/.test(r))&&c.push([n,r]);for(c.sort(function(e,i){return s[e[0].replace(/^ic-/,"")]-s[i[0].replace(/^ic-/,"")]});t=c.shift();){if(n=t[0],r=t[1],/-skip$/.test(n))return void o.remove();/-init$/.test(n)?(o.before("\r\n<% var "+r.replace(/;(?=\s*[_\w]+\s*=)/g,";var ")+" %>\r\n"),o.removeAttr(n)):/-for$/.test(n)?(o.before(r.replace(/^\s*(?:(\w+?)\s*\,\s*)?(\w+?)\s*in\s*([\w.]+)/,function(e,i,t,n){return i&&t?"<% for( var "+i+" in "+n+"){ var "+t+" = "+n+"["+i+"]; %>\r\n":"<% for( var "+e+"){ %>\r\n"})),o.after("\r\n<% } %>"),o.removeAttr(n)):/-for-start$/.test(n)?(o.before(r.replace(/^\s*(?:(\w+?)\s*\,\s*)?(\w+?)\s*in\s*([\w.]+)/,function(e,i,t,n){return i&&t?"<% for( var "+i+" in "+n+"){ var "+t+" = "+n+"["+i+"]; %>\r\n":"<% for( var "+e+"){ %>\r\n"})),o.removeAttr(n)):/-for-end$/.test(n)||/-if-end$/.test(n)?(o.after("\r\n<% } %>"),o.removeAttr(n)):/-else-if$/.test(n)?(o.before("<% } else if("+(""===r?void 0:r)+"){ %>\r\n"),o.removeAttr(n)):/-if$/.test(n)?(o.before("<% if("+(""===r?void 0:r)+"){ %>\r\n"),o.after("\r\n<% } %>"),o.removeAttr(n)):/-if-start$/.test(n)?(o.before("<% if("+(""===r?void 0:r)+"){ %>\r\n"),o.removeAttr(n)):/-else$/.test(n)?(o.before("<% } else{ %>\r\n"),o.after("\r\n<% } %>"),o.removeAttr(n)):/-bind$/.test(n)?(o.html("\r\n<%= "+(""===r?'""':r)+" %>\r\n"),o.removeAttr(n)):/^ic-(?:href|src|style|class|data|value)$/.test(n)?(o.removeAttr(n),o.attr(n.replace("ic-",""),r.replace(/{{(.+?)}}/g,"<%= $1 %>"))):o.attr(n,r.replace(/{{(.+?)}}/g,"<%= $1 %>"))}}}function createRender(e){!function(e){parser(e);for(var i,t=$(e).contents(),n=0;i=t.eq(n)[0];)n++,arguments.callee(i)}(e);var i=$(e).html().replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/\b(ic-)(?=href|src|style|class|data|value)/g,"").replace(/&amp;&amp;/g,"&&"),t=_.template(i);return t._tpl_=i,t}var config=function(){var e={directive_prefix:"ic"};return{get:function(i){return e[i]},set:function(i,t){e[i]=t}}}(),eventManager=function(){var e={};return{bind:function(e,i,t){e=e.split(",");for(var n in e)this._bind(e[n],i,t)},_bind:function(e,i,t){var n={f:i},r=this._getNamespace(e);t&&(n.context=t);var o=r._callback=r._callback||[];o.push(n)},unbind:function(e,i){e=e.split(",");for(var t in e)this._unbind(e[t],i)},_unbind:function(e,i){var t,n=this._getNamespace(e),r=n&&n._callback;if(r){if(!i)return void delete n._callback;for(var o=0,a=r.length;a>o;o++)if(t=r[o],i===t.f||i.toString()===t.f.toString())return void r.splice(o,1)}},fire:function(e,i,t){var n=e.split(/\.|\:/),r=n.shift(),o=[e];!function(e,i){if(e.length){i=i?i+".":"";for(var t=0,n=e.length;n>t;t++){var r=e.slice();r.splice(0,t+1);var a=i+"*"+(r.length?"."+r.join("."):"");o.push(a)}i+=e.shift(),arguments.callee(e,i)}}(n.slice(),r);for(var a;a=o.shift();)this._fire(a,i,t)},_fire:function(e,i,t){var n,r,o,a=this._getNamespace(e),c=a&&a._callback;if(c)for(var s=0,l=c.length;l>s;s++)n=c[s],r=n.context||{},o=n.f,o.constructor===Function&&o.apply(r,[{eventName:e,source:t},i])},_getNamespace:function(i){return e[i]=e[i]||{}},_look:function(){console.log(e)}}}(),controllers=function(){function e(e,i){for(var t in i)e[t]=i[t];return e}function i(){}function t(t,n){function r(){this._name=t}return r.prototype=new i,e(r.prototype,n||{}),new r}var n={},r={};return e(i.prototype,{set:function(e,i){this[e]=i,this.render()},get:function(e){return this[e]},_bind:function(e){"string"==typeof e&&(e=[e]);for(var i,t=0,n=e.length;n>t;t++)i=r[e[t]]=r[e[t]]||[],i.push(this._name)},_cancel:function(e){if(!e)return void delete r[this._name];"string"==typeof e&&(e=[e]);var i=r[this._name];if(i&&i.shift)for(var t;t=e.shift();)for(var n=0,o=i.length;o>n;n++)i[n]===t&&i.splice(n,1)},_fire:function(i){for(var t,o=this._name,a=(r[o]||[]).slice();t=a.shift();)n[t].scope._watch(e({source:this},i||{}))},_watch:function(){},fire:function(e,i){var t=this;eventManager.fire(e,i,t)},watch:function(e,i){var t=this;eventManager.bind(e,i,t)},unbind:function(e,i){eventManager.unbind(e,i)},tmplFn:function(){},diff:function(){},htmlList:null,updateDom:function(){},render:function(e,i,t){var n=this;setTimeout(function(){var r=n._render_(e,i);t&&r&&t.apply(r,[])},30)},_render_:function(e,i){var t,n,r=this.$elm,o=brick._tplfs[e];return r&&o&&(t=r.filter("[ic-tpl=?]".replace("?",e)),t=t.length?t:r.find("[ic-tpl=?]".replace("?",e)),n=o(i?{model:i}:this),t.length)?t.html(n):void 0},_render:function(){var e=this.tmplFn({data:this});if(this.htmlList){var i=this.diff(e);if(!i)return;return this.htmlList=e,this.updateDom(i)}this.domNode&&this.domNode.html(e)}}),{bind:r,get:function(e){return n[e]&&n[e].scope},add:function(e,i,r){r=r||{};var o,a=r.parent,c=r.depend||[];o=a?t(e,n[a]):t(e),r.global&&(window[e]=o),n[e]={fn:i,scope:o,depend:c,service:r.service,conf:r}},reg:function(e,i,r){r=r||{};var o=r.depend||[];n[e]={fn:i,conf:r,depend:o,service:r.service,scope:t(e)}},exec:function(e,i,r){var o=n[e];if(!o)return console.log("not find controller "+e);var a,c=o.conf,s=c.depend||[];return a=i?t(e,i):t(e),a._parent=i&&i._name,a.$elm=r,o.scope=a,s=services.get(s)||[],s=s.constructor!==Array?[s]:s,s.unshift(a),o.fn.apply(null,s),o.fn=function(){},c.global&&(window[e]=a),a},init:function(){var e,i,t,r=n;for(var o in r)e=r[o],i=services.get(e.depend)||[],i.constructor!==Array&&(i=[i]),i.unshift(e.scope),t=e.fn.apply(null,i),e.fn=function(){},e.service&&services.fill(o,t)},_look:function(){return n}}}(),services=function(){var e={},i={};return{_look:function(){console.log(i)},add:function(e,t,n){i[e]={depend:n,serve:t}},reg:function(e,t,n){var r=n&&n.constructor===Array?n:n.depend;i[e]={depend:r,serve:t,conf:n}},create:function(e){var t=this,n=i[e];if(n){var r=n.depend;return r&&(r=t.get(r)),n.serve.apply(null,r||[])}},fill:function(i,t){e[i]=t},get:function(i){var t=this;if(i){if("string"==typeof i)return e[i]=e[i]||t.create(i);if(i.constructor===Array){i=i.slice();for(var n,r=0,o=i.length;o>r;r++)n=i[r],i[r]=e[n]=e[n]||t.create(n);return i}}}}}(),directives={_pool:{},add:function(e,i){this._pool[e]=i},reg:function(e,i){this._pool[e]=i},get:function(e){return e?this._pool[e]:this._pool},exec:function(e,i,t){var n=this._pool,r=n[e];"function"==typeof r?r.apply(null,[i,t]):r.fn&&r.fn.apply(null,[i,t])},init:function(){var e=this._pool;for(var i in e){var t=e[i];"function"==typeof t?t():t.fn&&t.fn()}}};services.add("recordManager",recordManager),services.fill("eventManager",eventManager),root.brick={config:config,eventManager:eventManager,broadcast:function(e,i){this.eventManager.fire(e,i)},on:function(e,i){this.eventManager.watch(e,i)},controllers:controllers,services:services,directives:directives,getTpl:function(e){return this._tplfs[e]},_tplfs:{},_findProperty:function(){},init:function(){}},root._cc=window.console&&function(){try{console.log.apply(console,arguments)}catch(e){}}||function(){},!function(e){e.fn.icParseProperty=function(e){if(void 0===e)return void 0;var i=this.closest("[ic-ctrl]").attr("ic-ctrl"),t=i?brick.controllers.get(i):window;return function(e,i){var t=i.split(".");return function(e,i){var t=i.shift(),n=e[t];return n?i.length?arguments.callee(n,i):n:void 0}(e,t)}(t,e)},e.fn.icTabActive=e.fn.icTabs=function(e){var i=e.active;i&&this.attr("ic-tab-active",i)},e.fn.icAjax=function(e){return void 0===e?this.trigger("ic-ajax"):(e.data&&this.data("ic-submit-data",e.data),void(void 0!==e.disabled&&this.attr("ic-ajax-disabled",e.disabled)))},e.fn.icDialog=function(e){this.show();var i=this;return setTimeout(function(){var t=i.attr("ic-dialog");void 0!==t&&i.trigger("ic-dialog.call",e)},30),this},e.fn.icTimer=function(){var e=this,i=1*e.attr("ic-timer-count"),t=setInterval(function(){i--?e.text(i):(clearInterval(t),e.trigger("ic-timer.end"))},1e3);return this},e.icNextScene=function(){var i=e("[ic-scene]").filter("[ic-scene-active=1]");i.size&&i.nextScene()},e.fn.nextScene=function(){var i=this.attr("ic-scene-next");return i&&(this.hide().removeAttr("ic-scene-active"),e("[ic-scene=?]".replace("?",i)).show().attr("ic-scene-active",1)),this};var i=0;e.fn.tips=function(t){++i;var n,r,o,a=e(t||"body"),c=.4*a.innerWidth()+"px",s=e('<div class="tipsBox"></div>');return this.addClass("tips1").css({width:c}),this.appendTo(s),s.appendTo(a),c=this.width(),n=this.height(),r="-"+n/2+"px",o="-"+c/2+"px",this.css({top:40*i,left:o}),s.animate({top:0,opacity:"1"},500,function(){e(this).addClass("animated wobble")}),setTimeout(function(){s.animate({top:-300,opacity:"0"},500,function(){--i,s.remove()})},2e3*i),this},e.tips=function(i){e("<div>"+i+"</div>").tips()},e.fn.icEnterPress=function(i){return this.each(function(){i=e.proxy(i,this);var t=function(e){13==e.which&&i(e)};e(this).on("focus",function(){e(this).keypress(t)}).on("blur",function(){e(this).unbind("keypress",t)})})},function(e){var i='<span style="margin:0.2em auto;display:inline-block;text-align:center;" role="_loading_"><svg width="16" height="16" viewBox="0 0 300 300" xmlns="http://www.w3.org/2000/svg" version="1.1"><path d="M 150,0 a 150,150 0 0,1 106.066,256.066 l -35.355,-35.355 a -100,-100 0 0,0 -70.711,-170.711 z" fill="#3d7fe6"><animateTransform attributeName="transform" attributeType="XML" type="rotate" from="0 150 150" to="360 150 150" begin="0s" dur="1s" fill="freeze" repeatCount="indefinite" /></path></svg></span>';window.ActiveXObject&&(i="data:image/gif;base64,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",i='<span style="margin:0.2em; auto;display:inline-block;text-align:center;" role="_loading_"><img src="?"></span>'.replace("?",i)),e.fn.icSetLoading=e.fn.setLoading=function(){var t=this.outerWidth(),n=this.outerHeight(),r=this.offset(),o=(r.top,r.left,e(i).css({width:t,height:n,position:"absolute","margin-left":-t}));return this.css({opacity:"0.5"}).after(o),this.data("_ic-role-loading",o),this}}(jQuery),e.fn.icClearLoading=e.fn.clearLoading=function(){var e=this.data("_ic-role-loading");return e&&e.remove(),this.removeData("_ic-role-loading"),this.css({opacity:"1"}),this}}(jQuery),directives.add("ic-ctrl",function(e){var i=e.attr("ic-ctrl");if(i){var t=e.parent().closest("[ic-ctrl]"),n=t.size()?t.attr("ic-ctrl"):"";controllers.exec(i,controllers.get(n),e)}}),directives.add("ic-event",function(){var e="click",i=e.replace(/(?:^|,)(\w+?)(?=(?:,|$))/g,function(e,i){var t="[ic-?]".replace("?",i);return e.replace(i,t)});$("body").on(e,i,function(e){var i=$(this),t=e.type,n=i.attr("ic-"+t);return n=i.icParseProperty(n),n.apply(this,[e])})}),directives.add("placeholder",function(e){function i(e){var i=document.createElement("b");return i.innerHTML="<!--[if lt IE "+e+"]><i></i><![endif]-->",1===i.getElementsByTagName("i").length}if(window.ActiveXObject&&i(10)){var t=e,n=t.attr("placeholder");if(n){var r=t.attr("type");if("password"===r){var o=t.attr("class"),a=t.attr("style"),c='<input type="text" class="?" style="%">'.replace("?",o).replace("%",a);return c=$(c).insertBefore(t.hide()).val(n).css({color:"#CDCDCD"}),c.on("focus",function(){c.hide(),t.show().focus()}),void t.on("blur",function(){""==t.val()&&(c.show(),t.hide())})}"text"===r&&(t.val(n).css({color:"#CDCDCD"}),t.on("focus",function(){t.val()===n&&t.val("").css({color:""})}),t.on("blur",function(){""===t.val()&&t.val(n).css({color:"#CDCDCD"})}))}}}),directives.add("ic-slider",function(e){var i=e,t=i.attr("ic-slider-direction"),n=i.width(),r=i.height();i.css({position:"relative",overflow:"hidden"});var o={width:n+"px",height:r+"px"};t||(o.float="left");var a=i.find("[ic-role-slider-item]").css(o),c=a.size(),s=t?{height:c*r+"px"}:{width:c*n+"px"};s.position="absolute";var l=i.find("[ic-role-slider-view]").css(s),f=1,u=i.find("[ic-role-slider-pagination]").first().addClass("active"),d=function(){i.trigger("ic-slider-pagination",a.eq(f-1))};d();var A=function(){d()};u&&(A=function(){u&&u.removeClass("active"),u=i.find("[ic-role-slider-pagination="+f+"]").addClass("active"),d()});var v,h=t?function(){return 1>=f?(f=c,l.animate({top:(-c+1)*r},300,A)):l.animate({top:(2-f)*r},300,function(){f-=1,A()}),!1}:function(){return 1>=f?(f=c,l.animate({left:(-c+1)*n},500,A)):l.animate({left:(2-f)*n},500,function(){f-=1,A()}),!1},p=t?function(){return f>=c?(f=1,l.animate({top:0},300,A)):l.animate({top:-f*r},300,function(){f+=1,A()}),!1}:function(){return f>=c?(f=1,l.animate({left:0},500,A)):l.animate({left:-f*n},500,function(){f+=1,A()}),!1},g=i.attr("ic-slider-interval");g&&(v=setInterval(p,g),i.hover(function(){clearInterval(v)},function(){v=setInterval(p,g)})),i.delegate("[ic-role-slider-prev]","click",h),i.delegate("[ic-role-slider-next]","click",p),i.delegate("[ic-role-slider-pagination]","click",function(){u&&u.removeClass("active");var e=$(this).addClass("active"),i=e.attr("ic-role-slider-pagination");f=i-1,p()})}),directives.add("ic-tabs",function(e){function i(e){t(e,this);var i=l.attr("ic-role-tab");n&&n.hide(),n=f.find("[ic-role-con="+i+"]").show()}function t(e,i){l&&l.removeClass("active"),l=$(i||this).addClass("active"),o.trigger("ic-tabs.change",{activeTab:l})}var n,r,o=e,a=o.attr("ic-tabs"),c=(o.attr("ic-tab-disabled"),o.attr("ic-tab-select")),s=o.attr("ic-con-select"),l=o.attr("ic-tab-active");r=c?o.find(c).each(function(e){var i=$(this);i.attr("ic-role-tab",e)}):e.find("[ic-role-tab]");var f=$("[ic-role-tabc="+a+"]");f&&s&&f.find(s).each(function(e){e=r.eq(e).attr("ic-role-tab"),$(this).attr("ic-role-con",e)}),o.attr("ic-tabs-interval"),o.on("click","[ic-role-tab]:not([ic-tab-disabled=1])",f.length?i:t),l=l?o.find("[ic-role-tab=?]".replace("?",l)):o.find("[ic-role-tab]:not([ic-tab-disabled=1])").first(),l.trigger("click")}),directives.add("ic-dropdown",function(e){var i=e;i.css({position:"relative"});var t,n=i.height(),r=i.find("[ic-role-dropdown-menu]").css({position:"absolute",top:n+"px"});r.size()&&i.hover(function(){t=setTimeout(function(){r.show(300)},200)},function(){clearTimeout(t),r.slideUp(200)});var o=i.find("[ic-role-dropdown-con]").css({position:"absolute",overflow:"hidden"});if(o.size()){var a=o.height(),c=1;i.find("[ic-role-dropdown-toggle]").click(function(){c?(o.css({height:"auto"}),c=0):(o.css({height:a+"px"}),c=1)})}}),directives.add("ic-pagination",function(e){function i(){var i,t=Math.floor(s/2),r=[];t=l-t;var o=t=1>t?1:t;for(i=t+s-1,i=i>=c?c:i,o=t=i+s>=c?1>i-s?1:i-s:o;i>=t;t++)r.push(g.replace(u,t));o>1&&(r.unshift(f),r.unshift(g.replace(u,1))),c-i>2&&(r.push(f),r.push(g.replace(u,c))),1==l?v.addClass("disabled"):v.removeClass("disabled"),l==c?h.addClass("disabled"):h.removeClass("disabled"),v.siblings().not(h).remove(),$(r.join("")).insertAfter(v).filter("[ic-role-pagination-num="+l+"]").addClass("active"),n&&n(l),e.trigger("ic-pagination.change",l)}var t,n,r=e,o=r.attr("ic-pagination"),a=1*e.attr("ic-pagination-rows")||10,c=(r.attr("ic-pagination-on-change"),1*e.attr("ic-pagination-total")),s=1*e.attr("ic-pagination-step")||10,l=e.attr("ic-pagination-current")||1,f=e.find("[ic-role-pagination-ellipsis]")[0].outerHTML,u=/\{\{\}\}/g,d=e.prev("[ic-tpl=?]".replace("?",o)),A=e.attr("ic-source-ajax");A||(A=e.attr("ic-source"),A?(t=e.icParseProperty(A),c=Math.ceil(t.length/a),n=function(e){--e;for(var i,n=0>e*a-1?0:e*a,r=n+a,c=t.slice(n,r),s=[];i=c.shift();n++)s[n]=i;var l=brick._tplfs[o]({model:s});d.html(l)}):(t=$("[ic-role-pagination-page=?]".replace("?",o)).children(),t.length&&(c=Math.ceil(t.length/a),n=function(e){--e;var i=0>e*a-1?0:e*a,n=i+a;t.hide(),t.slice(i,n).show()})));var v=r.find("[ic-role-pagination-prev]").on("click",function(){2>l||(--l,i())}),h=r.find("[ic-role-pagination-next]").on("click",function(){l>=c||(++l,i())}),p=r.find("[ic-role-pagination-num]"),g=p[0].outerHTML;setTimeout(i,30),r.on("click","[ic-role-pagination-num]",function(){var e=1*$(this).attr("ic-role-pagination-num");l!=e&&(l=1*e,i())})}),directives.add("ic-scene",function(){var e=$("[ic-scene]"),i=$("[ic-scene-active]");i=i.size()?i:e.first(),i.show(),e.not(i).hide(),e.each(function(){var e=$(this);e.on("click","[ic-role-scene-next]",function(){var e=$(this).attr("ic-role-scene-next");i&&i.hide(),i=$("[ic-scene="+e+"]").show()})})}),directives.add("ic-timer",function(){}),directives.add("ic-dialog",function(e){function i(){r.show();var i=e.width();e.css("margin-left",-i/2),e.show(),e.trigger("ic-dialog."+o+".show")}function t(i,t){r.hide(),e.hide(),e.trigger("ic-dialog."+o+"."+t)}var n='<div class="t" style="position:fixed; z-index: 1000; left:0; top:0; width:100%; height: 100%; overflow: auto; background: rgba(0,34,89,0.2);"></div>';arguments.callee._run||(arguments.callee._run=1,$(document).on("click","[ic-dialog-href]",function(){var e=$(this).attr("ic-dialog-href");return $("[ic-dialog=?]".replace("?",e)).icDialog(),!1}));var r=$(n).appendTo("body").hide(),o=e.attr("ic-dialog");e.appendTo(r),e.on("ic-dialog.call",function(e,n){return"hide"===n?t(e):void i(e)}),e.on("click","[ic-role-dialog-confirm]",function(e){t(e,"confirm")}),e.on("click","[ic-role-dialog-cancel], [ic-role-dialog-close]",function(e){t(e,"cancel")})}),directives.add("ic-drag-view",function(e){function i(i){var t=i.pageX-a,o=i.pageY-c;a=i.pageX,c=i.pageY,s+=t,l+=o,s=-(r-n)>s?-(r-n):s,s=s>=0?0:s,e.css({left:s+"px"})}function t(){o.unbind("mousemove",i),o.unbind("mouseup",t)}var n,r,o=$(document),a=0,c=0,s=0,l=0;o.on("click","[ic-role-drag-key]",function(){var i=$(this),t=i.attr("ic-role-drag-key"),o=i.attr("ic-drag-direction"),a=140;e=$("[ic-role-drag-handle=?]".replace("?",t)).css({position:"relative"}),r=e.width(),n=e.closest("[ic-drag-view]").css({position:"relative"}).width();var c=e.position();s=c.left,l=c.top,"left"===o&&(s-=a,s=-(r-n)>s?-(r-n):s,e.animate({left:s},500)),"right"===o&&(s+=a,s=s>=0?0:s,e.animate({left:s},500))}),o.on("mousedown","[ic-role-drag-handle]",function(f){f.preventDefault(),a=f.pageX,c=f.pageY,e=$(this).css({position:"relative"}),n=e.closest("[ic-drag-view]").width();var u=e.position();s=u.left,l=u.top,r=e.width(),o.on("mousemove",i),o.on("mouseup",t)})}),directives.add("ic-form",function($elm,attrs){function compileRule(e){for(var i in presetRule)e=e.replace(i,presetRule[i]);var t='.test("?")';return e=e.replace(/\/[igm]{0,3}(?=(?:\|\||\&\&|$))/g,function(e){return e+t})}function _verify(val,rules,tips,$field){tips=tips||"error";var fns={};rules=rules.replace(/(?:^|\|\||\&\&)(\w+?)\(\)(?=(?:\|\||\&\&|$))/g,function(e,i){var t=$field.icParseProperty(i);return fns[i]=t,e.replace(i,"fns."+i).replace("()",'("?")')});var script=rules.replace(/\.\w+\("\?"\)/g,function(e){return e.replace("?",val)});try{return eval(script)?!1:tips}catch(e){console.error(e)}}var presetRule={id:/[\w_]{4,18}/,required:/[\w\d]+/,phone:/^1[0-9][0-9]\d{8}$/,email:/^(\w)+(\.\w+)*@(\w)+((\.\w{2,3}){1,3})$/,password:/(?:[\w]|[!@#$%^&*]){8,}/};arguments.callee._run||(arguments.callee._run=1,$.fn.icVerify=function(){var e=this.attr("ic-role-submit");if(e)return this.trigger("ic-form."+e),this.attr("ic-verification");var i=this.attr("ic-role-field");return i?(this.trigger("change"),this.attr("ic-verification")):!1});var namespace=$elm.attr("ic-form"),$fields=$elm.find("[ic-role-field]"),$submit=$elm.find("[ic-role-submit]"),$loading=$elm.find("[ic-role-loading]"),fields={};$submit.on("ic-form."+namespace,function(){fields={},$fields.filter(':not("[ic-field-rule]")').each(function(){var e=$(this),i=e.attr("ic-role-field"),t=e.attr("name")||i;fields[t]=e.val()}),$fields.filter(":visible").filter("[ic-field-rule]").each(function(){$(this).change()});for(var e in fields)if(fields[e]===!1)return $submit.removeAttr("ic-verification"),!1;return $submit.attr("ic-verification",!0)});var method=$submit.attr("ic-submit-method")||"post",action=$submit.attr("ic-submit-action"),done=$submit.attr("ic-submit-on-done"),always=$submit.attr("ic-submit-on-always"),failed=$submit.attr("ic-submit-on-failed"),before=$submit.attr("ic-submit-before"),dataType=$submit.attr("ic-submit-data-type")||"json",submitType=function(){if(/[\w_.]+\(\)\;?$/i.test(action))return action=$submit.icParseProperty(action.replace(/[();]/g,"")),1;var e=action.match(/https?:\/\/[\w.:]+/i);return e&&e[0]!==location.origin?2:3}();always=$submit.icParseProperty(always)||function(){},done=$submit.icParseProperty(done)||function(){},failed=$submit.icParseProperty(failed)||function(e){console.log(e)},before=$submit.icParseProperty(before)||function(){};var _iframe,_form;$submit.on("mousedown",function(){if($submit.icVerify()){if(1===submitType)return action.apply($submit,[]);var e=before(fields);if(e!==!1)return $loading.size()?($submit.hide(),$loading.show()):$submit.setLoading(),3===submitType?$.ajax({url:action,type:method,dataType:dataType,data:e||fields}).done(function(e){done(e)}).fail(failed).always(function(){$submit.show(),$loading.hide(),$submit.clearLoading(),always()}):void 0}}),$fields.icEnterPress(function(){$submit.trigger("mousedown")}),$fields.each(function(){var e=$(this),i=e.attr("ic-role-field"),t=e.attr("name")||i,n=e.attr("ic-field-rule");if(n&&"hidden"!==e.attr("type")){var r=e.attr("ic-field-err-tip"),o=e.attr("ic-field-verify-fire"),a=$elm.find('[ic-role-field-err-tip="?"]'.replace("?",i)),c=a.text();n=compileRule(n,$elm),e.on("change",function(){var c,s=e.val();(c=_verify(s,n,r,e))?(a.css({visibility:"visible"}).addClass("error").text(c),e.removeAttr("ic-verification"),fields[i]=!1,o&&e.trigger("ic-form."+namespace+"."+i+".verify",0)):(a.css({visibility:"hidden"}).removeClass("error"),e.attr("ic-verification",1),fields[t]=s,o&&e.trigger("ic-form."+namespace+"."+i+".verify",1))}),e.on("focus",function(){a.text(c)})}})}),directives.add("ic-ajax",function(){function e(){var e=this,i=$(this),t=i.attr("ic-ajax"),n=$("[ic-role-loading=?]".replace("?",t)),r=i.attr("ic-submit-action"),o=i.attr("ic-submit-data-type")||"json",a=i.attr("ic-submit-method")||"post",c=i.attr("ic-submit-on-done"),s=i.attr("ic-submit-on-always"),l=i.attr("ic-submit-on-failed"),f=i.attr("ic-submit-before");if(s=i.icParseProperty(s)||function(){console.log("always is undefined;")},c=i.icParseProperty(c)||function(){console.info("done is undefined;")},l=i.icParseProperty(l)||function(){console.info("failed is undefined;")},f=i.icParseProperty(f)||function(){console.info("before is undefined;")},f.apply(e)!==!1&&"true"!==i.attr("ic-ajax-disabled")){var u=i.data("ic-submit-data")||i.attr("ic-submit-data");n.size()?n.show()&&i.hide():i.setLoading(),$.ajax({url:r,type:a,dataType:o,data:u}).done(function(i){c.apply(e,[i])}).fail(function(i){l.apply(e,[i])}).always(function(){i.clearLoading()&&n.hide()&&i.show(),s.apply(e),i.removeData("ic-submit-data")})}}if(!arguments.callee._run){arguments.callee._run=1;var i=$(document);i.on("click","[ic-ajax]",e),i.on("ic-ajax","[ic-ajax]",e)}}),directives.add("ic-tpl",function(e){(!arguments.callee._run||e)&&(arguments.callee._run=1,(e||$("[ic-tpl]")).each(function(){var e=this.cloneNode(!0),i=$(this),t=i.attr("ic-tpl"),n=createRender(e),r=brick._tplfs=brick._tplfs||{};r[t]=n}))}),directives.add("ic-type-ahead",function(e){var i=$("body"),t=e.attr("ic-type-ahead"),n=e.attr("ic-source-ajax"),r=e.offset(),o=r.left,a=r.top,c=e.outerWidth(),s=e.outerHeight(),l=$("[ic-role-list=?]".replace("?",t)),f=brick.getTpl(l.attr("ic-tpl"));l.appendTo(i).css({top:a+s,left:o,"min-width":c});var u,d,A,v,h=0,p=function(e){if(e){if(!e.length)return l.hide();u=e;var i=f({model:e});l.show().html(i)}};n?v=function(e){d=$.ajax({dataType:"json",type:"post",url:n,data:{query:e}}).done(p)}:(n=e.attr("ic-source"),u=e.icParseProperty(n),v=function(e){var i=new RegExp(e,"img");return _.filter(u,function(e){if(_.isObject(e)){var t=_.filter(e,function(e){return i.test(e)});return t.length}return i.test(e)})}),e.on("focus",function(){var i=e.offset(),t=i.left,n=i.top;l.css({top:n+s+1,left:t})}).on("keyup",function(){var i=e.val();return i?void(i!=A&&(A=i,d&&d.abort(),v(A))):l.hide()}).on("keydown",function(i){var t=i.keyCode;if(38!=t&&40!=t&&13!=t)return void(h=0);var n=l.find("[ic-role-type-item]");if(n.length){var r=n.length-1;return 38==i.keyCode?(h=--h<0?r:h,void n.eq(h).addClass("active").siblings().removeClass("active")):40==i.keyCode?(h=++h>r?0:h,void n.eq(h).addClass("active").siblings().removeClass("active")):void(13==i.keyCode&&(n.eq(h).trigger("mousedown"),e.blur()))}}).on("blur",function(){l.fadeOut(function(){l.hide()})}),l.on("mousedown","[ic-role-type-item]",function(){var i=$(this).index(),t=u[i],n=$(this).attr("ic-role-type-item");e.val(n),e.trigger("type.complete",t)})}),$(function(){setTimeout(function(){directives.exec("ic-tpl"),directives.exec("ic-event"),function(e){var i=$(e);compile(e);for(var t,n=i.children(),r=0;t=n.eq(r)[0];)r++,arguments.callee(t)}(document.body),controllers.init()},30)})}(window);